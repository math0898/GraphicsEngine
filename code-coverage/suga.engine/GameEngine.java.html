<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GameEngine.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Graphics2d</a> &gt; <a href="index.source.html" class="el_package">suga.engine</a> &gt; <span class="el_source">GameEngine.java</span></div><h1>GameEngine.java</h1><pre class="source lang-java linenums">package suga.engine;

import suga.engine.graphics.AbstractGraphicsPanel;
import suga.engine.input.mouse.BasicMouseListener;
import suga.engine.threads.GameLogicThread;
import suga.engine.threads.GraphicsThread;
import suga.engine.threads.SugaThread;
import suga.engine.input.keyboard.GameKeyListener;
import suga.engine.game.Game;

import javax.swing.*;
import java.awt.*;
import java.awt.event.WindowEvent;

/**
 * A collection of static methods that are used to make starting and closing a game easier.
 *
 * @author Sugaku
 */
<span class="nc" id="L20">public class GameEngine {</span>

    /**
     * The currently opened frame.
     */
    protected static JFrame frame;

    /**
     * The current graphics thread if one is running.
     */
    protected static SugaThread graphics;

    /**
     * The current game logic thread if one is running.
     */
    protected static SugaThread logic;

    /**
     * An enum of pre-defined resolutions to open a game window at.
     *
     * @author Sugaku
     */
<span class="nc" id="L42">    public enum Window {</span>

        /**
         * Creates the window at the largest possible resolution in full screen mode.
         */
<span class="nc" id="L47">        FULL_SCREEN</span>
    }

    /**
     * Closes both the logic and graphics thread.
     */
    public static void stop () {
<span class="nc" id="L54">        graphics.setStopped(true);</span>
<span class="nc" id="L55">        logic.setStopped(true);</span>
<span class="nc" id="L56">        frame.dispatchEvent(new WindowEvent(frame, WindowEvent.WINDOW_CLOSING));</span>
<span class="nc" id="L57">    }</span>

    /**
     * Creates a new game window with all the possible configuration options being specified.
     *
     * @param width         The width to create the game window at.
     * @param height        The height to create the game window at.
     * @param name          The name for the resulting window.
     * @param border        Whether to hide the border or not when creating the window.
     * @param panel         The graphics panel to be used for this game.
     * @param background    The background color for the panel.
     * @param logicRate     How many times per second the game logic should be called.
     * @param frameRate     How many frames per second should the graphics thread target.
     * @param keyListener   The key listener to be used for this new window. Will override active frame.
     * @param mouseListener The mouse listener to use for this window. Will override active frame.
     * @param game          The game to attach to this window. Will override currently active panel or input listeners.
     */
    public static void launchGameWindow (int width, int height, String name, boolean border, AbstractGraphicsPanel panel,
                                         Color background, int logicRate, int frameRate, GameKeyListener keyListener,
                                         BasicMouseListener mouseListener, Game game) {
<span class="nc" id="L77">        panel.setBackground(background);</span>
<span class="nc" id="L78">        frame = new JFrame(name);</span>
<span class="nc" id="L79">        frame.setSize(width, height);</span>
<span class="nc" id="L80">        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L81">        frame.getContentPane().add(panel, BorderLayout.CENTER);</span>
<span class="nc" id="L82">        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">        frame.setUndecorated(!border);</span>
<span class="nc" id="L84">        frame.setVisible(true);</span>
<span class="nc" id="L85">        graphics = new GraphicsThread(panel, frameRate);</span>
<span class="nc" id="L86">        game.setPanel(panel);</span>
<span class="nc" id="L87">        keyListener.setFrame(frame);</span>
<span class="nc" id="L88">        mouseListener.setFrame(frame);</span>
<span class="nc" id="L89">        game.setKeyListener(keyListener);</span>
<span class="nc" id="L90">        game.setMouseListener(mouseListener);</span>
<span class="nc" id="L91">        logic = new GameLogicThread(game, logicRate);</span>
<span class="nc" id="L92">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>